function reditemGmapFilterAjax(){(function($){var form=document.getElementById("reditemCategoryDetail");form.task.value="categorydetailgmap.ajaxFilter";var url="index.php?"+$(form).serialize();reditemGmapLoadAjaxData(url)})(jQuery)}function reditemGmapLoadAjaxData(url){(function($){$.ajax({url:url,dataType:"json",cache:false}).done(function(data){if(typeof data.items!="undefined"){var results=data.items;for(index in markers){if(typeof markers[index]!="object"){continue}if(typeof results[index]=="undefined"){markers[index].setMap(null)}else{markers[index].setMap(map)}}}if(typeof data.filterDistance!="undefined"){var locationPoint=new google.maps.LatLng(data.filterDistance.location.lat,data.filterDistance.location.lng);reditemCategoryDetailGmapDrawCircle(locationPoint,data.filterDistance.distance*1e3)}else{reditemCategoryDetailGmapRemoveCircle()}afterRunAjaxFilter(data);$("#reditemsItems").empty().append(data.category);$("#reditemItemsPagination").empty().append(data.pagination);if(!(typeof data.itemsCount=="undefined")){if($("#reditem-CategoryDetail-"+data.categoryId+"-itemsCount").length>0){$("#reditem-CategoryDetail-"+data.categoryId+"-itemsCount").empty().append(data.itemsCount)}}if(!(typeof data.relatedCategories=="undefined")){for(parentCat in data.relatedCategories){var relatedCategories=data.relatedCategories[parentCat];var selectbox=$("#filter_related_"+parentCat);var selectAllText=selectbox.find("option[value='']").text();if(selectbox.length>0&&!$.isEmptyObject(relatedCategories)){selectbox.empty();selectbox.append("<option value=''>"+selectAllText+"</option>");for(relatedCat in relatedCategories){var relatedCategory=relatedCategories[relatedCat];var attr="";if(relatedCategory.filter==true){attr=" selected='selected'"}selectbox.append("<option value='"+relatedCategory.id+"'"+attr+">"+relatedCategory.title+"</option>")}selectbox.select2()}}}else{$("select.reditemFilterRelated").each(function(index){var selectbox=$(this);var tmp=$("#"+selectbox.attr("id")+"_tmp");if(tmp.length>0){selectbox.empty();tmp.find("option").each(function(){selectbox.append(new Option($(this).text(),$(this).val()))});selectbox.select2()}})}$('img[src^="holder.js"]').addClass("reditem-holder");Holder.run({images:".reditem-holder"})})})(jQuery)}
